%%https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiJSVodHRwczovL21lcm1haWQtanMuZ2l0aHViLmlvL21lcm1haWQtbGl2ZS1lZGl0b3IvIy9lZGl0L2V5SmpiMlJsSWpvaUpTVk5ZV1JsSUhkcGRHZ2dUV1Z5YldGcFpDQk5ZWEpyWkc5M2JpQmphR0Z5ZEdsdVp5Qm9kSFJ3Y3pvdkwyMWxjbTFoYVdRdGFuTXVaMmwwYUhWaUxtbHZMMjFsY20xaGFXUXRiR2wyWlMxbFpHbDBiM0l2WEc1Y2JtZHlZWEJvSUZSQ1hHNGxKVTV2WkdWeklHUmxabWx1YVhScGIyNWNibk4xWW1keVlYQm9JR1J2WTNWdFpXNTBXMFp2Y2lCbFlXTm9JR1J2WTNWdFpXNTBYVnh1VTNSaGNuUmJVbVZoWkNCaGNuUnBZMnhsSUc5dVkyVXVYVnh1Ulc1MFJYWmxiblJRY21WelpXNTBLRVJ2WlhNZ2RHaGxJSE5sYm5SbGJtTmxJR052Ym5SaGFXNGdaWFpsYm5SelB5bGNia0YwZEhKcFlrOXVSVzUwUlhabGJuUmJSR1ZqYVdSbE9qeGljaTgtTFNCUWIyeGhjbWwwZVRvZ1VHOXphWFJwZG1VdlRtVm5ZWFJwZG1VdlRtVjFkSEpoYkM5RGIyNW1iR2xqZEYxY2JrWnBibVJGZUhCc1JYaHdjbHRCYm01dmRHRjBaU0J6Wlc1MGFXMWxiblFnWlhod2NtVnpjMmx2Ym5OZFhHNUdhVzVrVkdGeVoyVjBXMFpwYm1RZ1lXeHNJSFJoY21kbGRITWdiMllnZEdobElIQnZiR0Z5SUdWNGNISmxjM05wYjI0dVhWeHVWR0Z5WjJWMFJYWmxiblJGYm5SYlNYTWdkR2hsSUhSaGNtZGxkQ0JoSUhCeVpTMWxlR2x6ZEdsdVp5QkZkbVZ1ZENCdmNpQkZiblJwZEhrX1hWeHVWR0Z5WjJWMFRHbHVhMXRFY21GM0lHRWdkR0Z5WjJWMElHeHBibXNnWm5KdmJTQnpaVzUwYVcxbGJuUWdaWGh3Y21WemMybHZiaUIwYnlCMFlYSm5aWFJkWEc1VVlYSm5aWFJKYzFSdmEyVnVVM0JoYmx0QmJtNXZkR0YwWlNCdGFXNXBiV0ZzSUhSdmEyVnVJSE53WVc0Z1lYTWdkR0Z5WjJWMFhWeHVRWFIwY21saVQyNVRaVzUwYVcxbGJuUmJSR1ZqYVdSbE9qeGljaTgtTFNCUWIyeGhjbWwwZVRvZ1VHOXphWFJwZG1VdlRtVm5ZWFJwZG1VdlRtVjFkSEpoYkM5RGIyNW1iR2xqZER4aWNpOC1MU0JWYm1ObGNuUmhhVzUwZVRvZ1dXVnpMMDV2UEdKeUx6NHRJRTVsWjJGMFpXUTZJRmxsY3k5T2J6eGljaTgtWFZ4dVhHNGxKU0JsWkdkbElHUmxabWx1YVhScGIyNWNibE4wWVhKMElDMHRQaUJGYm5SRmRtVnVkRkJ5WlhObGJuUmNibk4xWW1keVlYQm9JSE5sYm5SbGJtTmxXMFp2Y2lCbFlXTm9JSE5sYm5SbGJtTmxYVnh1Ulc1MFJYWmxiblJRY21WelpXNTBJQzB0UG54WlpYTjhJRUYwZEhKcFlrOXVSVzUwUlhabGJuUmNibk4xWW1keVlYQm9JR1YyWlc1MFpXNTBXMFp2Y2lCbFlXTm9JR1YyWlc1MFhWeHVRWFIwY21saVQyNUZiblJGZG1WdWRGeHVaVzVrWEc1QmRIUnlhV0pQYmtWdWRFVjJaVzUwSUMwdFBpQkdhVzVrUlhod2JFVjRjSEpjYmtWdWRFVjJaVzUwVUhKbGMyVnVkQ0F0TFQ1OFRtOThJRVpwYm1SRmVIQnNSWGh3Y2x4dVJtbHVaRVY0Y0d4RmVIQnlJQzB0UGlCR2FXNWtWR0Z5WjJWMFhHNXpkV0puY21Gd2FDQnpaVzUwYVcxbGJuUmxlSEJ5VzBadmNpQmxZV05vSUhObGJuUnBiV1Z1ZENCbGVIQnlaWE56YVc5dVhWeHVYRzVHYVc1a1ZHRnlaMlYwSUMwdFBpQlVZWEpuWlhSRmRtVnVkRVZ1ZEZ4dWMzVmlaM0poY0dnZ2RHRnlaMlYwVzBadmNpQmxZV05vSUhSaGNtZGxkRjFjYmxSaGNtZGxkRVYyWlc1MFJXNTBJQzB0UG54WlpYTjhJRlJoY21kbGRFeHBibXRjYmxSaGNtZGxkRVYyWlc1MFJXNTBJQzB0UG54T2Izd2dWR0Z5WjJWMFNYTlViMnRsYmxOd1lXNWNibFJoY21kbGRFbHpWRzlyWlc1VGNHRnVJQzB0UGlCVVlYSm5aWFJNYVc1clhHNVVZWEpuWlhSTWFXNXJJQzB0UGlCQmRIUnlhV0pQYmxObGJuUnBiV1Z1ZEZ4dVpXNWtYRzVsYm1SY2JtVnVaRnh1UVhSMGNtbGlUMjVUWlc1MGFXMWxiblFnTFMwLWZFUnZibVVoZkNCVGRHRnlkRnh1Wlc1a1hHNUJkSFJ5YVdKUGJsTmxiblJwYldWdWRDQXRMVDU4UlhoalpYQjBhVzl1T2lCUWIyeGhjbWwwZVNCcGN5QmthV1ptWlhKbGJuUWdaR1Z3Wlc1a2FXNW5JRzl1SUZSaGNtZGxkRG84WW5JdlBpQk5ZV3RsSUdGdWIzUm9aWElnYzJWdWRHbHRaVzUwSUdGdWJtOTBZWFJwYjI0Z2FXNGdjR3hoWTJWOElFWnBibVJGZUhCc1JYaHdjbHh1WEc1Y2JuTjBlV3hsSUdSdlkzVnRaVzUwSUdacGJHdzZJMFpHUml4emRISnZhMlV0ZDJsa2RHZzZNWEI0WEc1emRIbHNaU0J6Wlc1MFpXNWpaU0JtYVd4c09pTkdSa1lzYzNSeWIydGxMWGRwWkhSb09qRndlRnh1YzNSNWJHVWdaWFpsYm5SbGJuUWdabWxzYkRvalJrWkdMSE4wY205clpTMTNhV1IwYURveGNIaGNibk4wZVd4bElITmxiblJwYldWdWRHVjRjSElnWm1sc2JEb2pSa1pHTEhOMGNtOXJaUzEzYVdSMGFEb3hjSGhjYm5OMGVXeGxJSFJoY21kbGRDQm1hV3hzT2lOR1JrWXNjM1J5YjJ0bExYZHBaSFJvT2pGd2VDSXNJbTFsY20xaGFXUWlPbnNpZEdobGJXVWlPaUprWldaaGRXeDBJaXdpZDJsa2RHZ2lPaUl4TURBbElpd2lhR1ZwWjJoMElqb2lNekFsSW4wc0luVndaR0YwWlVWa2FYUnZjaUk2Wm1Gc2MyVjlcblxuZ3JhcGggVEJcbiUlTm9kZXMgZGVmaW5pdGlvblxuc3ViZ3JhcGggZG9jdW1lbnRbRm9yIGVhY2ggZG9jdW1lbnRdXG5TdGFydFtSZWFkIGFydGljbGUgb25jZS5dXG5FbnRFdmVudFByZXNlbnQoRG9lcyB0aGUgc2VudGVuY2UgY29udGFpbiBFdmVudHM_KVxuQXR0cmliT25FbnRFdmVudFtEZWNpZGU6PGJyLz4tIFBvbGFyaXR5OiBQb3NpdGl2ZS9OZWdhdGl2ZS9OZXV0cmFsLl1cbkZpbmRFeHBsRXhwcltBbm5vdGF0ZSBhbGwgU2VudGltZW50IEV4cHJlc3Npb25zLjxici8-Q2hvb3NlIHNtYWxsZXN0IGFtb3VudCBvZiB3b3JkcyBwb3NzaWJsZS4gXVxuRmluZFRhcmdldFtGaW5kIGFsbCBUYXJnZXRzLl1cblRhcmdldEV2ZW50RW50W0lzIHRoZSBUYXJnZXQgYSBwcmUtZXhpc3RpbmcgRXZlbnQgb3IgRW50aXR5P11cblRhcmdldExpbmtbTGluayBTZW50aW1lbnQgRXhwcmVzc2lvbiB0byBUYXJnZXQuXVxuVGFyZ2V0SXNUb2tlblNwYW5bQW5ub3RhdGUgYXMgc21hbGwgYXMgcG9zc2libGUgd29yZCBzcGFuIGFzIFRhcmdldC5dXG5BdHRyaWJPblNlbnRpbWVudFtEZWNpZGU6PGJyLz4tIFBvbGFyaXR5OiBQb3NpdGl2ZS9OZWdhdGl2ZS9OZXV0cmFsLjxici8-LSBVbmNlcnRhaW46IFllcy9Oby48YnIvPi0gTmVnYXRlZDogWWVzL05vLjxici8-XVxuXG4lJSBlZGdlIGRlZmluaXRpb25cblN0YXJ0IC0tPiBFbnRFdmVudFByZXNlbnRcbnN1YmdyYXBoIHNlbnRlbmNlW0ZvciBlYWNoIHNlbnRlbmNlXVxuRW50RXZlbnRQcmVzZW50IC0tPnxZZXN8IEF0dHJpYk9uRW50RXZlbnRcbnN1YmdyYXBoIGV2ZW50ZW50W0ZvciBlYWNoIEV2ZW50XVxuQXR0cmliT25FbnRFdmVudFxuZW5kXG5BdHRyaWJPbkVudEV2ZW50IC0tPiBGaW5kRXhwbEV4cHJcbkVudEV2ZW50UHJlc2VudCAtLT58Tm98IEZpbmRFeHBsRXhwclxuRmluZEV4cGxFeHByIC0tPiBGaW5kVGFyZ2V0XG5zdWJncmFwaCBzZW50aW1lbnRleHByW0ZvciBlYWNoIFNlbnRpbWVudCBFeHByZXNzaW9uXVxuXG5GaW5kVGFyZ2V0IC0tPiBUYXJnZXRFdmVudEVudFxuc3ViZ3JhcGggdGFyZ2V0W0ZvciBlYWNoIFRhcmdldF1cblRhcmdldEV2ZW50RW50IC0tPnxZZXN8IFRhcmdldExpbmtcblRhcmdldEV2ZW50RW50IC0tPnxOb3wgVGFyZ2V0SXNUb2tlblNwYW5cblRhcmdldElzVG9rZW5TcGFuIC0tPiBUYXJnZXRMaW5rXG5UYXJnZXRMaW5rIC0tPiBBdHRyaWJPblNlbnRpbWVudFxuZW5kXG5lbmRcbmVuZFxuZW5kXG5BdHRyaWJPblNlbnRpbWVudCAtLT58RXhjZXB0aW9uOiBQb2xhcml0eSBpcyBkaWZmZXJlbnQgZGVwZW5kaW5nIG9uIFRhcmdldDo8YnIvPiBNYWtlIGEgbmV3IG92ZXJsYXBwaW5nIFNlbnRpbWVudCBFeHByZXNzaW9uIGFubm90YXRpb24ufCBGaW5kRXhwbEV4cHJcbkF0dHJpYk9uU2VudGltZW50IC0tPnxEb25lISBHbyB0byBuZXh0IGFydGljbGUufCBTdGFydFxuXG5cbnN0eWxlIGRvY3VtZW50IGZpbGw6I0ZGRixzdHJva2Utd2lkdGg6MXB4XG5zdHlsZSBzZW50ZW5jZSBmaWxsOiNGRkYsc3Ryb2tlLXdpZHRoOjFweFxuc3R5bGUgZXZlbnRlbnQgZmlsbDojRkZGLHN0cm9rZS13aWR0aDoxcHhcbnN0eWxlIHNlbnRpbWVudGV4cHIgZmlsbDojRkZGLHN0cm9rZS13aWR0aDoxcHhcbnN0eWxlIHRhcmdldCBmaWxsOiNGRkYsc3Ryb2tlLXdpZHRoOjFweCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0Iiwid2lkdGgiOiIxMDAlIiwiaGVpZ2h0IjoiMzAlIn0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9

%%https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiJSVNYWRlIHdpdGggTWVybWFpZCBNYXJrZG93biBjaGFydGluZyBodHRwczovL21lcm1haWQtanMuZ2l0aHViLmlvL21lcm1haWQtbGl2ZS1lZGl0b3IvXG5cbmdyYXBoIFRCXG4lJU5vZGVzIGRlZmluaXRpb25cbnN1YmdyYXBoIGRvY3VtZW50W0ZvciBlYWNoIGRvY3VtZW50XVxuU3RhcnRbUmVhZCBhcnRpY2xlIG9uY2UuXVxuRW50RXZlbnRQcmVzZW50KERvZXMgdGhlIHNlbnRlbmNlIGNvbnRhaW4gZXZlbnRzPylcbkF0dHJpYk9uRW50RXZlbnRbRGVjaWRlOjxici8-LSBQb2xhcml0eTogUG9zaXRpdmUvTmVnYXRpdmUvTmV1dHJhbC9Db25mbGljdF1cbkZpbmRFeHBsRXhwcltBbm5vdGF0ZSBzZW50aW1lbnQgZXhwcmVzc2lvbnNdXG5GaW5kVGFyZ2V0W0ZpbmQgYWxsIHRhcmdldHMgb2YgdGhlIHBvbGFyIGV4cHJlc3Npb24uXVxuVGFyZ2V0RXZlbnRFbnRbSXMgdGhlIHRhcmdldCBhIHByZS1leGlzdGluZyBFdmVudCBvciBFbnRpdHk_XVxuVGFyZ2V0TGlua1tEcmF3IGEgdGFyZ2V0IGxpbmsgZnJvbSBzZW50aW1lbnQgZXhwcmVzc2lvbiB0byB0YXJnZXRdXG5UYXJnZXRJc1Rva2VuU3BhbltBbm5vdGF0ZSBtaW5pbWFsIHRva2VuIHNwYW4gYXMgdGFyZ2V0XVxuQXR0cmliT25TZW50aW1lbnRbRGVjaWRlOjxici8-LSBQb2xhcml0eTogUG9zaXRpdmUvTmVnYXRpdmUvTmV1dHJhbC9Db25mbGljdDxici8-LSBVbmNlcnRhaW50eTogWWVzL05vPGJyLz4tIE5lZ2F0ZWQ6IFllcy9Obzxici8-XVxuXG4lJSBlZGdlIGRlZmluaXRpb25cblN0YXJ0IC0tPiBFbnRFdmVudFByZXNlbnRcbnN1YmdyYXBoIHNlbnRlbmNlW0ZvciBlYWNoIHNlbnRlbmNlXVxuRW50RXZlbnRQcmVzZW50IC0tPnxZZXN8IEF0dHJpYk9uRW50RXZlbnRcbnN1YmdyYXBoIGV2ZW50ZW50W0ZvciBlYWNoIGV2ZW50XVxuQXR0cmliT25FbnRFdmVudFxuZW5kXG5BdHRyaWJPbkVudEV2ZW50IC0tPiBGaW5kRXhwbEV4cHJcbkVudEV2ZW50UHJlc2VudCAtLT58Tm98IEZpbmRFeHBsRXhwclxuRmluZEV4cGxFeHByIC0tPiBGaW5kVGFyZ2V0XG5zdWJncmFwaCBzZW50aW1lbnRleHByW0ZvciBlYWNoIHNlbnRpbWVudCBleHByZXNzaW9uXVxuXG5GaW5kVGFyZ2V0IC0tPiBUYXJnZXRFdmVudEVudFxuc3ViZ3JhcGggdGFyZ2V0W0ZvciBlYWNoIHRhcmdldF1cblRhcmdldEV2ZW50RW50IC0tPnxZZXN8IFRhcmdldExpbmtcblRhcmdldEV2ZW50RW50IC0tPnxOb3wgVGFyZ2V0SXNUb2tlblNwYW5cblRhcmdldElzVG9rZW5TcGFuIC0tPiBUYXJnZXRMaW5rXG5UYXJnZXRMaW5rIC0tPiBBdHRyaWJPblNlbnRpbWVudFxuZW5kXG5lbmRcbmVuZFxuQXR0cmliT25TZW50aW1lbnQgLS0-fERvbmUhfCBTdGFydFxuZW5kXG5BdHRyaWJPblNlbnRpbWVudCAtLT58RXhjZXB0aW9uOiBQb2xhcml0eSBpcyBkaWZmZXJlbnQgZGVwZW5kaW5nIG9uIFRhcmdldDo8YnIvPiBNYWtlIGFub3RoZXIgc2VudGltZW50IGFubm90YXRpb24gaW4gcGxhY2V8IEZpbmRFeHBsRXhwclxuXG5cbnN0eWxlIGRvY3VtZW50IGZpbGw6I0ZGRixzdHJva2Utd2lkdGg6MXB4XG5zdHlsZSBzZW50ZW5jZSBmaWxsOiNGRkYsc3Ryb2tlLXdpZHRoOjFweFxuc3R5bGUgZXZlbnRlbnQgZmlsbDojRkZGLHN0cm9rZS13aWR0aDoxcHhcbnN0eWxlIHNlbnRpbWVudGV4cHIgZmlsbDojRkZGLHN0cm9rZS13aWR0aDoxcHhcbnN0eWxlIHRhcmdldCBmaWxsOiNGRkYsc3Ryb2tlLXdpZHRoOjFweCIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0Iiwid2lkdGgiOiIxMDAlIiwiaGVpZ2h0IjoiMzAlIn0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9

graph TB
%%Nodes definition
subgraph document[For each document]
Start[Read article once.]
EntEventPresent(Does the sentence contain Events?)
AttribOnEntEvent[Decide:<br/>- Polarity: Positive/Negative/Neutral.]
FindExplExpr[Annotate all Sentiment Expressions.<br/>Choose smallest amount of words possible. ]
FindTarget[Find all Targets.]
TargetEventEnt[Is the Target a pre-existing Event or Entity?]
TargetLink[Link Sentiment Expression to Target.]
TargetIsTokenSpan[Annotate as small as possible word span as Target.]
AttribOnSentiment[Decide:<br/>- Polarity: Positive/Negative/Neutral.<br/>- Uncertain: Yes/No.<br/>- Negated: Yes/No.<br/>]

%% edge definition
Start --> EntEventPresent
subgraph sentence[For each sentence]
EntEventPresent -->|Yes| AttribOnEntEvent
subgraph eventent[For each Event]
AttribOnEntEvent
end
AttribOnEntEvent --> FindExplExpr
EntEventPresent -->|No| FindExplExpr
FindExplExpr --> FindTarget
subgraph sentimentexpr[For each Sentiment Expression]

FindTarget --> TargetEventEnt
subgraph target[For each Target]
TargetEventEnt -->|Yes| TargetLink
TargetEventEnt -->|No| TargetIsTokenSpan
TargetIsTokenSpan --> TargetLink
TargetLink --> AttribOnSentiment
end
end
end
end
AttribOnSentiment -->|Exception: Polarity is different depending on Target:<br/> Make a new overlapping Sentiment Expression annotation.| FindExplExpr
AttribOnSentiment -->|Done! Go to next article.| Start


style document fill:#FFF,stroke-width:1px
style sentence fill:#FFF,stroke-width:1px
style eventent fill:#FFF,stroke-width:1px
style sentimentexpr fill:#FFF,stroke-width:1px
style target fill:#FFF,stroke-width:1px